'use client';
"use strict";var e=require("tslib"),r=require("react"),t=require("../../../lib/shape.cjs"),a=require("../../../lib/sizing.cjs"),o=require("../../../lib/spacing.cjs"),d=require("../../../lib/tremorTwMerge.cjs"),n=require("react-day-picker"),l=require("date-fns"),s=require("date-fns/locale"),u=require("../../../hooks/useInternalState.cjs"),m=require("./dateRangePickerUtils.cjs");require("../Select/Select.cjs");var i=require("../Select/SelectItem.cjs"),c=require("../../../assets/ArrowRightHeadIcon.cjs"),b=require("../../../assets/ArrowLeftHeadIcon.cjs"),f=require("../../../assets/XCircleIcon.cjs"),g=require("@headlessui/react"),k=require("../selectUtils.cjs");function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var h=p(r);const v=l.startOfToday(),w=h.default.forwardRef(((p,w)=>{var x,y;const{value:_,defaultValue:j,onValueChange:M,enableSelect:N=!0,minDate:E,maxDate:q,placeholder:S="Select",selectPlaceholder:T="Select",disabled:D=!1,locale:C=s.enUS,enableClear:O=!0,children:X,className:P}=p,R=e.__rest(p,["value","defaultValue","onValueChange","enableSelect","minDate","maxDate","placeholder","selectPlaceholder","disabled","locale","enableClear","children","className"]),[V,B]=u(j,_),[I,L]=r.useState(!1),[z,F]=r.useState(!1),U=r.useMemo((()=>{const e=[];return E&&e.push({before:E}),q&&e.push({after:q}),e}),[E,q]),A=r.useMemo((()=>{const e=new Map;return X?h.default.Children.forEach(X,(r=>{var t;e.set(r.props.value,{text:null!==(t=k.getNodeText(r))&&void 0!==t?t:r.props.value,from:r.props.from,to:r.props.to})})):m.defaultOptions.forEach((r=>{e.set(r.value,{text:r.text,from:r.from,to:v})})),e}),[X]),H=r.useMemo((()=>{if(X)return k.constructValueToNameMapping(X);const e=new Map;return m.defaultOptions.forEach((r=>e.set(r.value,r.text))),e}),[X]),Y=null==V?void 0:V.selectValue,G=m.parseStartDate(null==V?void 0:V.from,E,Y,A),J=m.parseEndDate(null==V?void 0:V.to,q,Y,A),K=G||J?m.formatSelectedDates(G,J,C):S,Q=l.startOfMonth(null!==(y=null!==(x=null!=J?J:G)&&void 0!==x?x:q)&&void 0!==y?y:v),W=O&&!D;return h.default.createElement("div",Object.assign({ref:w,className:d.tremorTwMerge("w-full min-w-[10rem] relative flex justify-between text-tremor-default","max-w-sm",P)},R),h.default.createElement(g.Popover,{as:"div",className:d.tremorTwMerge("w-full overflow-hidden",N?"rounded-l-tremor-default":"rounded-tremor-default",I&&"ring-2 ring-tremor-brand-muted dark:focus:ring-dark-tremor-brand-muted")},h.default.createElement("div",{className:"relative w-full overflow-hidden"},h.default.createElement(g.Popover.Button,{onFocus:()=>L(!0),onBlur:()=>L(!1),disabled:D,className:d.tremorTwMerge("w-full outline-none text-left whitespace-nowrap truncate focus:ring-2 transition duration-100 rounded-l-tremor-default","rounded-l-tremor-default border-tremor-border shadow-tremor-input text-tremor-content-emphasis focus:border-tremor-brand-subtle","dark:border-dark-tremor-border dark:shadow-dark-tremor-input dark:text-dark-tremor-content-emphasis dark:focus:border-dark-tremor-brand-subtle",N?"rounded-l-tremor-default":"rounded-tremor-default",o.spacing.twoXl.paddingLeft,W?o.spacing.fourXl.paddingRight:o.spacing.twoXl.paddingRight,o.spacing.sm.paddingY,t.border.sm.all,k.getSelectButtonColors(k.hasValue(G||J),D))},K),W&&h.default.createElement("button",{className:d.tremorTwMerge("absolute outline-none focus:ring-2 inset-y-0 right-0 flex items-center transition duration-100","focus:border-tremor-brand-subtle focus:ring-tremor-brand-muted","dark:focus:border-dark-tremor-brand-subtle dark:focus:ring-dark-tremor-brand-muted",o.spacing.twoXl.marginRight),onClick:e=>{e.preventDefault(),null==M||M({}),B({})}},h.default.createElement(f,{className:d.tremorTwMerge(m.makeDateRangePickerClassName("clearIcon"),"flex-none","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",a.sizing.md.height,a.sizing.md.width)}))),h.default.createElement(g.Popover.Panel,{className:d.tremorTwMerge("absolute z-10 divide-y overflow-y-auto min-w-min left-0 outline-none rounded-tremor-default","bg-tremor-background border-tremor-border divide-tremor-border shadow-tremor-dropdown","dark:bg-dark-tremor-background dark:border-dark-tremor-border dark:divide-dark-tremor-border dark:shadow-dark-tremor-dropdown",o.spacing.twoXs.marginTop,o.spacing.twoXs.marginBottom,t.border.sm.all)},h.default.createElement(n.DayPicker,Object.assign({mode:"range",showOutsideDays:!0,defaultMonth:Q,selected:{from:G,to:J},onSelect:e=>{null==M||M({from:null==e?void 0:e.from,to:null==e?void 0:e.to}),B({from:null==e?void 0:e.from,to:null==e?void 0:e.to})},locale:C,disabled:U,className:"p-3",classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-2 relative items-center",caption_label:"text-tremor-default text-tremor-content-emphasis dark:text-dark-tremor-content-emphasis font-medium",nav:"space-x-1 flex items-center",nav_button:d.tremorTwMerge("flex items-center justify-center p-1 h-7 w-7 outline-none focus:ring-2 transition duration-100 border border-tremor-border dark:border-dark-tremor-border hover:bg-tremor-background-muted dark:hover:bg-dark-tremor-background-muted rounded-tremor-small focus:border-tremor-brand-subtle dark:focus:border-dark-tremor-brand-subtle focus:ring-tremor-brand-muted dark:focus:ring-dark-tremor-brand-muted text-tremor-content-subtle dark:text-dark-tremor-content-subtle hover:text-tremor-content dark:hover:text-dark-tremor-content"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"w-9 font-normal text-center text-tremor-content-subtle dark:text-dark-tremor-content-subtle",row:"flex w-full mt-0.5",cell:"text-center p-0 relative focus-within:relative text-tremor-default text-tremor-content-emphasis dark:text-dark-tremor-content-emphasis",day:"h-9 w-9 p-0 hover:bg-tremor-background-subtle dark:hover:bg-dark-tremor-background-subtle outline-tremor-brand dark:outline-dark-tremor-brand rounded-tremor-default",day_selected:"aria-selected:bg-tremor-background-emphasis aria-selected:text-tremor-content-inverted dark:aria-selected:bg-dark-tremor-background-emphasis dark:aria-selected:text-dark-tremor-content-inverted ",day_disabled:"text-tremor-content-subtle dark:text-dark-tremor-content-subtle disabled:hover:bg-transparent",day_range_middle:d.tremorTwMerge("!rounded-none aria-selected:!bg-tremor-background-subtle aria-selected:dark:!bg-dark-tremor-background-subtle aria-selected:!text-tremor-content aria-selected:dark:!bg-dark-tremor-background-subtle"),day_outside:"text-tremor-content-subtle dark:text-dark-tremor-content-subtle",day_range_start:"rounded-r-none rounded-l-tremor-small aria-selected:text-tremor-brand-inverted dark:aria-selected:text-dark-tremor-brand-inverted",day_range_end:"rounded-l-none rounded-r-tremor-small aria-selected:text-tremor-brand-inverted dark:aria-selected:text-dark-tremor-brand-inverted"},components:{IconLeft:r=>{var t=e.__rest(r,[]);return h.default.createElement(b,Object.assign({className:"h-4 w-4"},t))},IconRight:r=>{var t=e.__rest(r,[]);return h.default.createElement(c,Object.assign({className:"h-4 w-4"},t))}}},p)))),N&&h.default.createElement(g.Listbox,{as:"div",className:d.tremorTwMerge("w-48 overflow-hidden -ml-px rounded-r-tremor-default",z&&"ring-2 ring-tremor-brand-muted dark:focus:ring-dark-tremor-brand-muted"),value:Y,onChange:e=>{const{from:r,to:t}=A.get(e),a=null!=t?t:v;null==M||M({from:r,to:a,selectValue:e}),B({from:r,to:a,selectValue:e})},disabled:D},(({value:e})=>{var r;return h.default.createElement(h.default.Fragment,null,h.default.createElement(g.Listbox.Button,{onFocus:()=>F(!0),onBlur:()=>F(!1),className:d.tremorTwMerge("w-full outline-none text-left whitespace-nowrap truncate rounded-r-tremor-default transition duration-100","border-tremor-border shadow-tremor-input text-tremor-content-emphasis focus:border-tremor-brand-subtle","dark:border-dark-tremor-border dark:shadow-dark-tremor-input dark:text-dark-tremor-content-emphasis dark:focus:border-dark-tremor-brand-subtle",o.spacing.twoXl.paddingLeft,o.spacing.twoXl.paddingRight,o.spacing.sm.paddingY,t.border.sm.all,k.getSelectButtonColors(k.hasValue(e),D))},e&&null!==(r=H.get(e))&&void 0!==r?r:T),h.default.createElement(g.Listbox.Options,{className:d.tremorTwMerge("absolute z-10 divide-y overflow-y-auto w-full inset-x-0 right-0 outline-none","shadow-tremor-dropdown bg-tremor-background border-tremor-border divide-tremor-border rounded-tremor-default","dark:shadow-dark-tremor-dropdown dark:bg-dark-tremor-background dark:border-dark-tremor-border dark:divide-dark-tremor-border",o.spacing.twoXs.marginTop,o.spacing.twoXs.marginBottom,t.border.sm.all)},null!=X?X:m.defaultOptions.map((e=>h.default.createElement(i,{key:e.value,value:e.value},e.text)))))})))}));w.displayName="DateRangePicker",module.exports=w;
